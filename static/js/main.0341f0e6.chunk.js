(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(26).concat([function(e,t,a){e.exports=a.p+"static/media/edit-button.a041973f.svg"},,,function(e,t,a){e.exports=a.p+"static/media/delete-button.1e0a35ed.svg"},function(e,t,a){e.exports=a.p+"static/media/RUB.a9d45a22.svg"},function(e,t,a){e.exports=a.p+"static/media/USD.58921271.svg"},function(e,t,a){e.exports=a.p+"static/media/EUR.1d59ac9e.svg"},,function(e,t,a){e.exports=a(62)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(14),o=a(7),s=a(8),u=a(10),l=a(9),i=a(11),m=a(12),d=a(13),p=a(3),h=a(1),f=a(20),E=a(25),b={accounts:[],rates:{USD:null,EUR:null},saveAccounts:function(){localStorage.setItem("dengi",JSON.stringify(this.accounts))},loadAccounts:function(){localStorage.getItem("dengi")&&(this.accounts=[].concat(Object(f.a)(JSON.parse(localStorage.getItem("dengi"),function(e,t){return"amount"===e?parseFloat(t):t}))))},loadRates:function(){var e=this;fetch("https://www.cbr-xml-daily.ru/daily_json.js").then(function(e){return e.json()}).then(function(t){e.rates.USD=t.Valute.USD.Value,e.rates.EUR=t.Valute.EUR.Value})},deleteAccount:function(e){this.accounts=[].concat(this.accounts.slice(0,e),this.accounts.slice(e+1)),this.saveAccounts()},addAccount:function(e){this.accounts=[].concat(Object(f.a)(this.accounts),[e]),this.saveAccounts()},updateAccount:function(e,t){this.accounts=[].concat(this.accounts.slice(0,t),e,this.accounts.slice(t+1)),this.saveAccounts()}},g=Object(E.observable)(b),_=(a(39),a(40),function(e,t,a){return a*e.filter(function(e){return e.currency===t}).reduce(function(e,t){return t.amount+e},0)}),v=function(e){return _(e,"RUB",1)},y=function(e,t){return _(e,"USD",t)},U=function(e,t){return _(e,"EUR",t)},N=function(e){return e.toLocaleString("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:2})},O=function(e,t){var a=e/t*100;return Number.isNaN(a)||a===1/0?0:a},j=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("section",{className:"total"},c.a.createElement("span",{className:"total__text"},"\u0418\u0442\u043e\u0433\u043e:"),"\u20bd ".concat(this.total))}},{key:"total",get:function(){return N(v(g.accounts)+y(g.accounts,g.rates.USD)+U(g.accounts,g.rates.EUR))}}]),t}(c.a.Component);Object(h.g)(j,{total:h.d,Total:p.a});a(41),a(42);function C(e){var t=e.color,a=e.elementClass,n=e.children,r=e.onClick,o="icon";return o+=" icon--color-".concat(t),a&&(o+=" ".concat(a)),c.a.createElement("div",{className:o,onClick:r},n)}C.defaultProps={color:"primary"};var R=a(26),S=a.n(R);var x=function(e){var t=e.index,a=e.elementClass;return c.a.createElement(m.b,{to:"/edit/".concat(t),"aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:a},c.a.createElement(C,{children:c.a.createElement("img",{src:S.a,alt:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",width:"17",height:"auto"})}))},D=a(29),k=a.n(D);var w=function(e){var t=e.index,a=e.elementClass;return c.a.createElement(C,{color:"error",elementClass:a,onClick:function(){g.deleteAccount(t)},children:c.a.createElement("img",{src:k.a,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0447\u0435\u0442",width:"17",height:"auto"})})},A=a(30),B=a.n(A),I=a(31),F=a.n(I),q=a(32),J=a.n(q);var T=function(e){var t=e.currency;return c.a.createElement(C,{children:c.a.createElement("img",{src:function(e){switch(e){case"RUB":return B.a;case"USD":return F.a;case"EUR":return J.a;default:return e}}(t),alt:"\u041a\u043e\u0434 \u0432\u0430\u043b\u044e\u0442\u044b: ".concat(t),width:"auto",height:"22"})})};a(51);var V=function(e){var t=e.amount,a=e.type,n=e.custodian,r=e.elementClass,o="account-details";return r&&(o+=" ".concat(r)),c.a.createElement("p",{className:o},c.a.createElement("span",{className:"account-details__amount"},N(t)),c.a.createElement("span",{className:"account-details__details"},a&&n?"".concat(a," \u0432 ").concat(n):"".concat(a).concat(n)))};var M=Object(p.a)(function(){var e=g.accounts.map(function(e,t){return c.a.createElement("li",{key:t,className:"accounts__item"},c.a.createElement(T,{currency:e.currency}),c.a.createElement(V,{elementClass:"accounts__text-content",amount:e.amount,type:e.type,custodian:e.custodian}),c.a.createElement(x,{elementClass:"accounts__edit",index:t}),c.a.createElement(w,{elementClass:"accounts__delete",index:t}))});return c.a.createElement("ul",{className:"accounts"},e)});a(52);var P=function(e){var t=e.elementClass,a=e.onClick,n=e.title,r="button";return t&&(r+=" ".concat(t)),c.a.createElement("button",{className:r,onClick:a},n)};a(53);var L=function(e){var t=e.message;return c.a.createElement("p",{className:"status-message"},t)};a(54);var z=function(e){var t=e.USD,a=e.EUR;return c.a.createElement("p",{className:"rates"},c.a.createElement("span",{className:"rates__currency"},"USD:")," ",t&&N(t),", ",c.a.createElement("span",{className:"rates__currency"},"EUR:")," ",a&&N(a))},G=(a(55),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("section",{className:"chart"},c.a.createElement("p",{className:"chart__wrapper"},c.a.createElement("span",{className:"chart__bar chart__bar--rub",style:{width:"".concat(this.percentageRUB,"%")}}),c.a.createElement("span",{className:"chart__bar chart__bar--usd",style:{width:"".concat(this.percentageUSD,"%")}}),c.a.createElement("span",{className:"chart__bar chart__bar--eur",style:{width:"".concat(this.percentageEUR,"%")}})),c.a.createElement("p",{className:"chart__legend"},c.a.createElement("span",{className:"chart__percentage chart__percentage--rub"},"RUB: ",N(this.percentageRUB),"%"),c.a.createElement("span",{className:"chart__percentage chart__percentage--usd"},"USD: ",N(this.percentageUSD),"%"),c.a.createElement("span",{className:"chart__percentage chart__percentage--eur"},"EUR: ",N(this.percentageEUR),"%")))}},{key:"total",get:function(){return v(g.accounts)+y(g.accounts,g.rates.USD)+U(g.accounts,g.rates.EUR)}},{key:"percentageRUB",get:function(){return O(v(g.accounts),this.total)}},{key:"percentageUSD",get:function(){return O(y(g.accounts,g.rates.USD),this.total)}},{key:"percentageEUR",get:function(){return O(U(g.accounts,g.rates.EUR),this.total)}}]),t}(c.a.Component));Object(h.g)(G,{CurrencyChart:p.a,total:h.d,percentageRUB:h.d,percentageUSD:h.d,percentageEUR:h.d});var H=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){g.loadAccounts(),g.loadRates()}},{key:"render",value:function(){return c.a.createElement("section",{className:"overview"},g.rates.USD&&g.rates.EUR?c.a.createElement(j,null):c.a.createElement(L,{message:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u043a\u0443\u0440\u0441\u0430\u0445..."}),0!==g.accounts.length&&c.a.createElement(G,null),0===g.accounts.length?c.a.createElement(L,{message:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u0447\u0451\u0442 \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"}):c.a.createElement(M,null),c.a.createElement(m.b,{to:"/add/",className:"overview__add-account"},c.a.createElement(P,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0451\u0442",elementClass:"button--account"})),(g.rates.USD||g.rates.EUR)&&c.a.createElement(z,{USD:g.rates.USD,EUR:g.rates.EUR}))}}]),t}(c.a.Component);Object(h.g)(H,{Overview:p.a});var K=a(17),Q=a(33);a(56);function W(e){var t=e.autoComplete,a=e.autoFocus,n=e.disabled,r=e.label,o=e.min,s=e.name,u=e.onChange,l=e.placeholder,i=e.readOnly,m=e.required,d=e.step,p=e.type,h=e.value;return c.a.createElement("label",{className:"input"},"".concat(r,":"),c.a.createElement("input",{className:"input__field",name:s,type:p,step:"".concat(d),min:"".concat(o),onChange:u,value:h,required:m,autoFocus:a,autoComplete:"".concat(t),readOnly:i,disabled:n,placeholder:l}))}W.defaultProps={type:"text",autoComplete:!1};a(57);var X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.name,c=t.value;a.setState(function(e){return{account:Object(Q.a)({},e.account,Object(K.a)({},n,c))}})},a.handleAdd=function(){a.index?g.updateAccount(a.state.account,a.index):g.addAccount(a.state.account),a.setState({readyToSubmit:!0})},a.index=a.props.match.params.index,a.state={account:{currency:"RUB",custodian:"",type:"",amount:""},readyToSubmit:!1},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.index&&this.setState({account:{currency:g.accounts[this.index].currency,custodian:g.accounts[this.index].custodian,type:g.accounts[this.index].type,amount:g.accounts[this.index].amount}})}},{key:"render",value:function(){return this.state.readyToSubmit?c.a.createElement(d.a,{to:"/"}):c.a.createElement("form",{className:"edit-form"},c.a.createElement("h2",{className:"edit-form__heading"},this.index?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0447\u0451\u0442\u0430":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0451\u0442"),c.a.createElement(W,{className:"edit-form__input",label:"\u0421\u0443\u043c\u043c\u0430",name:"amount",onChange:this.handleInputChange,value:this.state.account.amount,required:!0,autoFocus:!0,type:"number",step:.01,min:0}),c.a.createElement("label",{className:"edit-form__select"},"\u0412\u0430\u043b\u044e\u0442\u0430",c.a.createElement("select",{className:"edit-form__select-field",name:"currency",value:this.state.account.currency,required:!0,onChange:this.handleInputChange},c.a.createElement("option",{value:"RUB"},"\u0420\u0443\u0431\u043b\u0438"),c.a.createElement("option",{value:"USD"},"\u0414\u043e\u043b\u043b\u0430\u0440\u044b"),c.a.createElement("option",{value:"EUR"},"\u0415\u0432\u0440\u043e"))),c.a.createElement(W,{className:"edit-form__input",label:"\u0412\u0438\u0434 \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u0438",name:"type",onChange:this.handleInputChange,value:this.state.account.type,placeholder:"\u0412\u043a\u043b\u0430\u0434, \u0431\u0440\u043e\u043a\u0435\u0440\u0441\u043a\u0438\u0439 \u0441\u0447\u0451\u0442"}),c.a.createElement(W,{className:"edit-form__input",label:"\u041c\u0435\u0441\u0442\u043e \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",name:"custodian",onChange:this.handleInputChange,value:this.state.account.custodian,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430, \u0431\u0440\u043e\u043a\u0435\u0440\u0430"}),c.a.createElement("div",{className:"edit-form__button-wrap"},c.a.createElement(m.b,{to:"/",style:{"text-decoration":"none"},className:"edit-form__button"},c.a.createElement(P,{title:"\u041d\u0430\u0437\u0430\u0434"})),c.a.createElement(P,{onClick:this.handleAdd,elementClass:"edit-form__button button--primary",title:this.index?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0451\u0442"})))}}]),t}(n.Component);Object(h.g)(X,{EditForm:p.a});a(58),a(59),a(60),a(61);var Y=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"app"},c.a.createElement(m.a,null,c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:"/",component:H}),c.a.createElement(d.b,{path:"/add",component:X}),c.a.createElement(d.b,{path:"/edit/:index",component:X}))))}}]),t}(n.Component);Object(h.g)(Y,{App:p.a}),Object(r.render)(c.a.createElement(Y,null),document.getElementById("root"))}]),[[34,1,2]]]);
//# sourceMappingURL=main.0341f0e6.chunk.js.map