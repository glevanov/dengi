(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a.p+"static/media/edit-button.a041973f.svg"},28:function(e,t,a){e.exports=a.p+"static/media/delete-button.1e0a35ed.svg"},29:function(e,t,a){e.exports=a.p+"static/media/RUB.a9d45a22.svg"},30:function(e,t,a){e.exports=a.p+"static/media/USD.58921271.svg"},31:function(e,t,a){e.exports=a.p+"static/media/EUR.1d59ac9e.svg"},33:function(e,t,a){e.exports=a(67)},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(14),r=a(7),s=a(8),u=a(11),i=a(9),l=a(12),m=a(10),d=a(13),h=a(6),p=a(1),f=a(19),E=a(24),b={accounts:[],rates:{USD:null,EUR:null},saveAccounts:function(){localStorage.setItem("dengi",JSON.stringify(this.accounts))},loadAccounts:function(){localStorage.getItem("dengi")&&(this.accounts=[].concat(Object(f.a)(JSON.parse(localStorage.getItem("dengi")))))},loadRates:function(){var e=this;fetch("https://www.cbr-xml-daily.ru/daily_json.js").then(function(e){return e.json()}).then(function(t){e.rates.USD=t.Valute.USD.Value,e.rates.EUR=t.Valute.EUR.Value})},deleteAccount:function(e){this.accounts=[].concat(this.accounts.slice(0,e),this.accounts.slice(e+1)),this.saveAccounts()},addAccount:function(e){this.accounts=[].concat(Object(f.a)(this.accounts),[e]),this.saveAccounts()},updateAccount:function(e,t){this.accounts=[].concat(this.accounts.slice(0,t),e,this.accounts.slice(t+1)),this.saveAccounts()}},v=Object(E.observable)(b),y=(a(38),a(39),function(e,t,a){return a*e.filter(function(e){return e.currency===t}).reduce(function(e,t){return t.amount+e},0)}),g=function(e){return e.toLocaleString("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:2})},_=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("section",{className:"total"},c.a.createElement("span",{className:"total__text"},"\u0418\u0442\u043e\u0433\u043e:"),"\u20bd ".concat(this.total))}},{key:"total",get:function(){return g((e=v.accounts,y(e,"RUB",1)+function(e,t){return y(e,"USD",t)}(v.accounts,v.rates.USD)+function(e,t){return y(e,"EUR",t)}(v.accounts,v.rates.EUR)));var e}}]),t}(c.a.Component);Object(p.g)(_,{total:p.d,Total:h.a});a(40),a(41);function O(e){var t=e.color,a=e.elementClass,n=e.children,o=e.onClick,r="icon";return r+=" icon--color-".concat(t),a&&(r+=" ".concat(a)),c.a.createElement("div",{className:r,onClick:o},n)}O.defaultProps={color:"primary"};var C=a(25),j=a.n(C);function U(e){var t=e.index,a=e.elementClass;return c.a.createElement(m.b,{to:"/edit/".concat(t),"aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:a},c.a.createElement(O,{children:c.a.createElement("img",{src:j.a,alt:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",width:"17",height:"auto"})}))}var N=a(28),x=a.n(N);function S(e){var t=e.index,a=e.elementClass;return c.a.createElement(O,{color:"error",elementClass:a,onClick:function(){v.deleteAccount(t)},children:c.a.createElement("img",{src:x.a,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0447\u0435\u0442",width:"17",height:"auto"})})}var R=a(29),D=a.n(R),w=a(30),k=a.n(w),A=a(31),I=a.n(A);function B(e){var t=e.currency;return c.a.createElement(O,{children:c.a.createElement("img",{src:function(e){switch(e){case"RUB":return D.a;case"USD":return k.a;case"EUR":return I.a;default:return e}}(t),alt:"\u041a\u043e\u0434 \u0432\u0430\u043b\u044e\u0442\u044b: ".concat(t),width:"auto",height:"22"})})}a(57);function F(e){var t=e.amount,a=e.type,n=e.custodian,o=e.elementClass,r="account-details";return o&&(r+=" ".concat(o)),c.a.createElement("p",{className:r},c.a.createElement("span",{className:"account-details__amount"},g(t)),c.a.createElement("span",{className:"account-details__details"},a&&n?"".concat(a," \u0432 ").concat(n):"".concat(a).concat(n)))}var q=Object(h.a)(function(){var e=v.accounts.map(function(e,t){return c.a.createElement("li",{key:t,className:"accounts__item"},c.a.createElement(B,{currency:e.currency}),c.a.createElement(F,{elementClass:"accounts__text-content",amount:e.amount,type:e.type,custodian:e.custodian}),c.a.createElement(U,{elementClass:"accounts__edit",index:t}),c.a.createElement(S,{elementClass:"accounts__delete",index:t}))});return c.a.createElement("ul",{className:"accounts"},e)});a(58);function J(e){var t=e.elementClass,a=e.onClick,n=e.title,o="button";return t&&(o+=" ".concat(t)),c.a.createElement("button",{className:o,onClick:a},n)}a(59);var T=function(e){var t=e.message;return c.a.createElement("p",{className:"status-message"},t)};a(60);var V=function(e){var t=e.USD,a=e.EUR;return c.a.createElement("p",{className:"rates"},c.a.createElement("span",{className:"rates__currency"},"USD:")," ",t&&g(t),", ",c.a.createElement("span",{className:"rates__currency"},"EUR:")," ",a&&g(a))},M=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){v.loadAccounts(),v.loadRates()}},{key:"render",value:function(){return c.a.createElement("section",{className:"overview"},v.rates.USD&&v.rates.EUR?c.a.createElement(_,null):c.a.createElement(T,{message:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u043a\u0443\u0440\u0441\u0430\u0445..."}),0===v.accounts.length?c.a.createElement(T,{message:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u0447\u0451\u0442 \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"}):c.a.createElement(q,null),c.a.createElement(m.b,{to:"/add/",className:"overview__add-account"},c.a.createElement(J,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0451\u0442",elementClass:"button--account"})),(v.rates.USD||v.rates.EUR)&&c.a.createElement(V,{USD:v.rates.USD,EUR:v.rates.EUR}))}}]),t}(c.a.Component);Object(p.g)(M,{Overview:h.a});var P=a(17),L=a(32);a(61);function z(e){var t=e.autoComplete,a=e.autoFocus,n=e.disabled,o=e.label,r=e.min,s=e.name,u=e.onChange,i=e.placeholder,l=e.readOnly,m=e.required,d=e.step,h=e.type,p=e.value;return c.a.createElement("label",{className:"input"},"".concat(o,":"),c.a.createElement("input",{className:"input__field",name:s,type:h,step:"".concat(d),min:"".concat(r),onChange:u,value:p,required:m,autoFocus:a,autoComplete:"".concat(t),readOnly:l,disabled:n,placeholder:i}))}z.defaultProps={type:"text",autoComplete:!1};a(62);var G=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.name,c=t.value;a.setState(function(e){return{account:Object(L.a)({},e.account,Object(P.a)({},n,c))}})},a.handleAdd=function(){a.index?v.updateAccount(a.state.account,a.index):v.addAccount(a.state.account),a.setState({readyToSubmit:!0})},a.index=a.props.match.params.index,a.state={account:{currency:"RUB",custodian:"",type:"",amount:""},readyToSubmit:!1},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.index&&this.setState({account:{currency:v.accounts[this.index].currency,custodian:v.accounts[this.index].custodian,type:v.accounts[this.index].type,amount:v.accounts[this.index].amount}})}},{key:"render",value:function(){return this.state.readyToSubmit?c.a.createElement(d.a,{to:"/"}):c.a.createElement("form",{className:"edit-form"},c.a.createElement("h2",{className:"edit-form__heading"},this.index?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0447\u0451\u0442\u0430":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0451\u0442"),c.a.createElement(z,{className:"edit-form__input",label:"\u0421\u0443\u043c\u043c\u0430",name:"amount",onChange:this.handleInputChange,value:this.state.account.amount,required:!0,autoFocus:!0,type:"number",step:.01,min:0}),c.a.createElement("label",{className:"edit-form__select"},"\u0412\u0430\u043b\u044e\u0442\u0430",c.a.createElement("select",{className:"edit-form__select-field",name:"currency",value:this.state.account.currency,required:!0,onChange:this.handleInputChange},c.a.createElement("option",{value:"RUB"},"\u0420\u0443\u0431\u043b\u0438"),c.a.createElement("option",{value:"USD"},"\u0414\u043e\u043b\u043b\u0430\u0440\u044b"),c.a.createElement("option",{value:"EUR"},"\u0415\u0432\u0440\u043e"))),c.a.createElement(z,{className:"edit-form__input",label:"\u0412\u0438\u0434 \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u0438",name:"type",onChange:this.handleInputChange,value:this.state.account.type,placeholder:"\u0412\u043a\u043b\u0430\u0434, \u0431\u0440\u043e\u043a\u0435\u0440\u0441\u043a\u0438\u0439 \u0441\u0447\u0451\u0442"}),c.a.createElement(z,{className:"edit-form__input",label:"\u041c\u0435\u0441\u0442\u043e \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",name:"custodian",onChange:this.handleInputChange,value:this.state.account.custodian,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430, \u0431\u0440\u043e\u043a\u0435\u0440\u0430"}),c.a.createElement("div",{className:"edit-form__button-wrap"},c.a.createElement(m.b,{to:"/",style:{"text-decoration":"none"},className:"edit-form__button"},c.a.createElement(J,{title:"\u041d\u0430\u0437\u0430\u0434"})),c.a.createElement(J,{onClick:this.handleAdd,elementClass:"edit-form__button button--primary",title:this.index?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0451\u0442"})))}}]),t}(n.Component),H=Object(h.a)(G),K=(a(63),a(64),a(65),a(66),function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"app"},c.a.createElement(m.a,null,c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:"/",component:M}),c.a.createElement(d.b,{path:"/add",component:H}),c.a.createElement(d.b,{path:"/edit/:index",component:H}))))}}]),t}(n.Component)),Q=Object(h.a)(K);Object(o.render)(c.a.createElement(Q,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.2f76d5fa.chunk.js.map